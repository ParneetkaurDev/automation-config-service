meta:
  domain: 'ONDC:RETINVL'
  version: 1.2.5
  flowId: RETINVL_DISCOVERY_FLOW
transaction_data:
  transaction_id: a46c032b-27ba-4bc5-b1d9-631402166902
  latest_timestamp: '1970-01-01T00:00:00.000Z'
  bap_id: bap.example.com
  bap_uri: 'https://bap.example.com'
  bpp_id: bpp.example.com
  bpp_uri: 'https://bpp.example.com'
steps:
  - api: search
    action_id: search_1
    owner: BAP
    responseFor: null
    unsolicited: false
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBjb25zdCBwYXlsb2FkID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkZWZhdWx0UGF5bG9hZCkpOwoKICBjb25zdCBpbnB1dHMgPSBzZXNzaW9uRGF0YT8udXNlcl9pbnB1dHMgfHwge307CgogIGNvbnN0IHsKICAgIG1vZGUsCiAgICBjYXRlZ29yeSwKICAgIHByb2R1Y3ROYW1lLAogICAgZ3BzLAogICAgYXJlYUNvZGUsCiAgICBmaW5kZXJGZWVUeXBlID0gInBlcmNlbnQiLAogICAgZmluZGVyRmVlQW1vdW50ID0gIjIiLAogICAgZ3RpbkNvZGUgPSAiMzpHVElOIyIsCiAgICBpbWFnZVVybCA9ICJodHRwczovL3NuZWFrZXItaW1hZ2UuYm5wLmNvbSIsCiAgICBjaXR5Q29kZQogIH0gPSBpbnB1dHM7CiAgcGF5bG9hZC5jb250ZXh0LmNpdHkgPSBjaXR5Q29kZQogIHBheWxvYWQubWVzc2FnZSA9IHBheWxvYWQubWVzc2FnZSB8fCB7fTsKICBwYXlsb2FkLm1lc3NhZ2UuaW50ZW50ID0gcGF5bG9hZC5tZXNzYWdlLmludGVudCB8fCB7fTsKICBkZWxldGUgcGF5bG9hZC5tZXNzYWdlLmludGVudC5jYXRlZ29yeTsKICBkZWxldGUgcGF5bG9hZC5tZXNzYWdlLmludGVudC5pdGVtOwoKICBpZiAobW9kZSA9PT0gIkNBVEVHT1JZIikgewogICAgcGF5bG9hZC5tZXNzYWdlLmludGVudC5jYXRlZ29yeSA9IHsKICAgICAgaWQ6IGNhdGVnb3J5CiAgICB9OwogIH0KCiAgaWYgKG1vZGUgPT09ICJQUk9EVUNUIikgewogICAgcGF5bG9hZC5tZXNzYWdlLmludGVudC5pdGVtID0gewogICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgbmFtZTogcHJvZHVjdE5hbWUsCiAgICAgICAgY29kZTogZ3RpbkNvZGUsCiAgICAgICAgaW1hZ2VzOiBbaW1hZ2VVcmxdCiAgICAgIH0KICAgIH07CiAgfQoKICBwYXlsb2FkLm1lc3NhZ2UuaW50ZW50LmZ1bGZpbGxtZW50ID0gewogICAgdHlwZTogIkRlbGl2ZXJ5IiwKICAgIGVuZDogewogICAgICBsb2NhdGlvbjogewogICAgICAgIGdwczogZ3BzLAogICAgICAgIGFkZHJlc3M6IHsKICAgICAgICAgIGFyZWFfY29kZTogYXJlYUNvZGUKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICBwYXlsb2FkLm1lc3NhZ2UuaW50ZW50LnBheW1lbnQgPSB7CiAgICAiQG9uZGMvb3JnL2J1eWVyX2FwcF9maW5kZXJfZmVlX3R5cGUiOiBmaW5kZXJGZWVUeXBlLAogICAgIkBvbmRjL29yZy9idXllcl9hcHBfZmluZGVyX2ZlZV9hbW91bnQiOiBmaW5kZXJGZWVBbW91bnQKICB9OwoKICBjb25zdCB0aW1lc3RhbXAgPSBwYXlsb2FkLmNvbnRleHQ/LnRpbWVzdGFtcDsKCiAgY29uc3QgYmFwVGVybXNUYWcgPSB7CiAgICBjb2RlOiAiYmFwX3Rlcm1zIiwKICAgIGxpc3Q6IFsKICAgICAgewogICAgICAgIGNvZGU6ICJzdGF0aWNfdGVybXMiLAogICAgICAgIHZhbHVlOiAiIgogICAgICB9LAogICAgICB7CiAgICAgICAgY29kZTogInN0YXRpY190ZXJtc19uZXciLAogICAgICAgIHZhbHVlOgogICAgICAgICAgImh0dHBzOi8vZ2l0aHViLmNvbS9PTkRDLU9mZmljaWFsL05QLVN0YXRpYy1UZXJtcy9idXllck5QX0JOUC8xLjAvdGMucGRmIgogICAgICB9LAogICAgICB7CiAgICAgICAgY29kZTogImVmZmVjdGl2ZV9kYXRlIiwKICAgICAgICB2YWx1ZTogdGltZXN0YW1wCiAgICAgIH0KICAgIF0KICB9OwoKICBwYXlsb2FkLm1lc3NhZ2UuaW50ZW50LnRhZ3MgPQogICAgcGF5bG9hZC5tZXNzYWdlLmludGVudC50YWdzIHx8IFtdOwoKICBwYXlsb2FkLm1lc3NhZ2UuaW50ZW50LnRhZ3MgPQogICAgcGF5bG9hZC5tZXNzYWdlLmludGVudC50YWdzLmZpbHRlcigKICAgICAgKHQpID0+IHQuY29kZSAhPT0gImJhcF90ZXJtcyIKICAgICk7CgogIHBheWxvYWQubWVzc2FnZS5pbnRlbnQudGFncy5wdXNoKGJhcFRlcm1zVGFnKTsKCiAgcmV0dXJuIHBheWxvYWQ7CiAgLy8gcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwp9
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: 'ONDC:RETINVL'
          action: search
          country: IND
          city: 'std:080'
          core_version: 1.2.5
          bap_id: bnp.com
          bap_uri: 'https://bnp.com/ondc'
          transaction_id: T1
          message_id: M1
          timestamp: '2025-01-08T08:00:00.000Z'
          ttl: PT30S
        message:
          intent:
            category:
              id: Mobile Phone
            fulfillment:
              type: Delivery
              end:
                location:
                  gps: '12.9740,77.6134'
                  address:
                    area_code: '560001'
            payment:
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '2'
            tags:
              - code: bap_terms
                list:
                  - code: static_terms
                    value: ''
                  - code: static_terms_new
                    value: >-
                      https://github.com/ONDC-Official/NP-Static-Terms/buyerNP_BNP/1.0/tc.pdf
                  - code: effective_date
                    value: '2025-02-01T00:00:00.000Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        city_code: $.context.city
        search_item: $.message.intent.item
        search_category: $.message.intent.category
      inputs:
        id: RETINVL_Discovery_Input
        jsonSchema:
          type: object
          properties:
            mode:
              type: string
              enum:
                - CATEGORY
                - PRODUCT
            cityCode:
              type: string
              pattern: '^std:\d{3}$'
            gps:
              type: string
              pattern: >-
                ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
            areaCode:
              type: string
              pattern: '^\d{6}$'
            finderFeeType:
              type: string
              enum:
                - percent
                - amount
            finderFeeAmount:
              type: string
              pattern: '^[0-9]+(\.[0-9]{1,2})?$'
          required:
            - mode
            - cityCode
            - gps
            - areaCode
            - finderFeeType
            - finderFeeAmount
          allOf:
            - if:
                properties:
                  mode:
                    const: CATEGORY
              then:
                properties:
                  category:
                    type: string
                    minLength: 2
                    maxLength: 100
                required:
                  - category
            - if:
                properties:
                  mode:
                    const: PRODUCT
              then:
                properties:
                  productName:
                    type: string
                    minLength: 2
                    maxLength: 200
                required:
                  - productName
  - api: on_search
    action_id: on_search_1
    owner: BPP
    responseFor: search_1
    unsolicited: false
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBjb25zdCBwYXlsb2FkID0gKGRlZmF1bHRQYXlsb2FkKTsKICBjb25zdCBwcm92aWRlciA9IHBheWxvYWQubWVzc2FnZS5jYXRhbG9nWyJicHAvcHJvdmlkZXJzIl1bMF07CgogIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsKICBwYXlsb2FkLmNvbnRleHQudGltZXN0YW1wID0gdGltZXN0YW1wOwogIHBheWxvYWQuY29udGV4dC5jaXR5ID0gc2Vzc2lvbkRhdGEuY2l0eV9jb2RlWzBdOwogIHByb3ZpZGVyLnRpbWUgPSB7IGxhYmVsOiAiZW5hYmxlIiwgdGltZXN0YW1wIH07CgogIGNvbnN0IENBVEVHT1JZX0dST1VQUyA9IHsKICAgIEVMRUNUUk9OSUNTOiBbCiAgICAgICJNb2JpbGUgUGhvbmUiLCAiTGFwdG9wIiwgIkRlc2t0b3AiLCAiVGFibGV0IiwKICAgICAgIlNtYXJ0IFRWIiwgIlN0YW5kYXJkIFRWIiwgIk1vbml0b3IiLCAiQ2FtZXJhIiwgIkNhbWNvcmRlciIKICAgIF0sCiAgICBBQ0NFU1NPUklFUzogWwogICAgICAiTW91c2UiLCAiS2V5Ym9hcmQiLCAiSGVhZHNldCIsICJFYXJwaG9uZSIsCiAgICAgICJDYWJsZSIsICJBZGFwdGVyIiwgIkNoYXJnZXIiLCAiTW9iaWxlIENvdmVyIgogICAgXSwKICAgIExBUkdFX0FQUExJQU5DRVM6IFsKICAgICAgIkFpciBDb25kaXRpb25lciIsICJSZWZyaWdlcmF0b3IiLAogICAgICAiV2FzaGluZyBNYWNoaW5lIiwgIkRpc2h3YXNoZXIiLAogICAgICAiV2F0ZXIgSGVhdGVyIiwgIk1pY3Jvd2F2ZSBPdmVuIgogICAgXSwKICAgIFNNQUxMX0FQUExJQU5DRVM6IFsKICAgICAgIk1peGVyIEdyaW5kZXIiLCAiSnVpY2VyIiwgIkJsZW5kZXIiLAogICAgICAiRWxlY3RyaWMgS2V0dGxlIiwgIkNvZmZlZSBNYWtlciIsCiAgICAgICJJbmR1Y3Rpb24gQ29va3RvcCIKICAgIF0KICB9OwoKICBjb25zdCBCUkFORF9QT09MID0gewogICAgRUxFQ1RST05JQ1M6IFsiQXBwbGUiLCAiU2Ftc3VuZyIsICJTb255IiwgIkRlbGwiLCAiSFAiXSwKICAgIEFDQ0VTU09SSUVTOiBbIkxvZ2l0ZWNoIiwgIkJvYXQiLCAiWmVicm9uaWNzIiwgIkFua2VyIl0sCiAgICBMQVJHRV9BUFBMSUFOQ0VTOiBbIkxHIiwgIlNhbXN1bmciLCAiSUZCIiwgIkJvc2NoIl0sCiAgICBTTUFMTF9BUFBMSUFOQ0VTOiBbIlBoaWxpcHMiLCAiQmFqYWoiLCAiUHJlc3RpZ2UiXQogIH07CgogIGZ1bmN0aW9uIGdldEdyb3VwKGNhdGVnb3J5KSB7CiAgICBmb3IgKGNvbnN0IGdyb3VwIGluIENBVEVHT1JZX0dST1VQUykgewogICAgICBpZiAoQ0FURUdPUllfR1JPVVBTW2dyb3VwXS5pbmNsdWRlcyhjYXRlZ29yeSkpIHsKICAgICAgICByZXR1cm4gZ3JvdXA7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiAiR0VORVJJQyI7CiAgfQoKICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogIC8vIFZBUklBTlQgR0VORVJBVE9SIChVUERBVEVEKQogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgogIGZ1bmN0aW9uIGdlbmVyYXRlUHJvZHVjdHMoY2F0ZWdvcnksIGN1c3RvbU5hbWUpIHsKICAgIGNvbnN0IGdyb3VwID0gZ2V0R3JvdXAoY2F0ZWdvcnkpOwogICAgY29uc3QgYnJhbmRzID0gQlJBTkRfUE9PTFtncm91cF0gfHwgWyJHZW5lcmljIl07CiAgICBjb25zdCB2YXJpYW50cyA9IFsiU3RhbmRhcmQiLCAiUHJvIiwgIlByZW1pdW0iXTsKCiAgICBsZXQgaXRlbUNvdW50ZXIgPSAxOyAvLyDwn5SlIGluY3JlbWVudGFsIGNvdW50ZXIKCiAgICBjb25zdCBwcm9kdWN0cyA9IFtdOwoKICAgIGJyYW5kcy5zbGljZSgwLCAyKS5mb3JFYWNoKChicmFuZCkgPT4gewogICAgICB2YXJpYW50cy5mb3JFYWNoKCh2YXJpYW50KSA9PiB7CiAgICAgICAgY29uc3QgYmFzZVByaWNlID0gMzAwMCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIwMDAwKTsKCiAgICAgICAgY29uc3QgbmFtZSA9IGN1c3RvbU5hbWUKICAgICAgICAgID8gYCR7Y3VzdG9tTmFtZX0gJHt2YXJpYW50fWAKICAgICAgICAgIDogYCR7YnJhbmR9ICR7Y2F0ZWdvcnl9ICR7dmFyaWFudH1gOwoKICAgICAgICBwcm9kdWN0cy5wdXNoKHsKICAgICAgICAgIGlkOiBgSSR7aXRlbUNvdW50ZXJ9YCwKICAgICAgICAgIHRpbWU6IHsgbGFiZWw6ICJlbmFibGUiLCB0aW1lc3RhbXAgfSwKICAgICAgICAgIHBhcmVudF9pdGVtX2lkOiAiVjEiLAogICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICBuYW1lLAogICAgICAgICAgICBjb2RlOiBgMzpHVElOJHtpdGVtQ291bnRlcn1gLCAvLyDwn5SlIGluY3JlbWVudGFsIEdUSU4KICAgICAgICAgICAgc2hvcnRfZGVzYzogbmFtZSwKICAgICAgICAgICAgbG9uZ19kZXNjOiBgJHtuYW1lfSBFZGl0aW9uYCwKICAgICAgICAgICAgaW1hZ2VzOiBbCiAgICAgICAgICAgICAgYGh0dHBzOi8vZHVtbXlpbWFnZS5jb20vNjAweDQwMC8wMDAvZmZmJnRleHQ9JHtlbmNvZGVVUklDb21wb25lbnQobmFtZSl9YAogICAgICAgICAgICBdCiAgICAgICAgICB9LAogICAgICAgICAgcXVhbnRpdHk6IHsKICAgICAgICAgICAgdW5pdGl6ZWQ6IHsKICAgICAgICAgICAgICBtZWFzdXJlOiB7IHVuaXQ6ICJ1bml0IiwgdmFsdWU6ICIxIiB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1heGltdW06IHsgY291bnQ6ICI1IiB9CiAgICAgICAgICB9LAogICAgICAgICAgcHJpY2U6IHsKICAgICAgICAgICAgY3VycmVuY3k6ICJJTlIiLAogICAgICAgICAgICB2YWx1ZTogYmFzZVByaWNlLnRvU3RyaW5nKCksCiAgICAgICAgICAgIG1heGltdW1fdmFsdWU6IChiYXNlUHJpY2UgKyAyMDAwKS50b1N0cmluZygpCiAgICAgICAgICB9LAogICAgICAgICAgY2F0ZWdvcnlfaWQ6IGNhdGVnb3J5LAogICAgICAgICAgZnVsZmlsbG1lbnRfaWQ6ICJGMSIsCiAgICAgICAgICBwYXltZW50X2lkczogWyIxIl0sCiAgICAgICAgICBsb2NhdGlvbl9pZDogIkwxIgogICAgICAgIH0pOwoKICAgICAgICBpdGVtQ291bnRlcisrOyAvLyDwn5SlIGluY3JlbWVudCBmb3IgbmV4dCBpdGVtCiAgICAgIH0pOwogICAgfSk7CgogICAgcmV0dXJuIHByb2R1Y3RzOwogIH0KCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAvLyBNQUlOIExPR0lDCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCiAgaWYgKHNlc3Npb25EYXRhLnNlYXJjaF9pdGVtPy5sZW5ndGggPiAwKSB7CiAgICBjb25zdCBwcm9kdWN0TmFtZSA9IHNlc3Npb25EYXRhLnNlYXJjaF9pdGVtWzBdLmRlc2NyaXB0b3IubmFtZTsKICAgIGNvbnN0IGNhdGVnb3J5ID0KICAgICAgc2Vzc2lvbkRhdGEuc2VhcmNoX2NhdGVnb3J5Py5bMF0/LmlkIHx8ICJNb2JpbGUgUGhvbmUiOwoKICAgIHByb3ZpZGVyLml0ZW1zID0gZ2VuZXJhdGVQcm9kdWN0cyhjYXRlZ29yeSwgcHJvZHVjdE5hbWUpOwoKICB9IGVsc2UgaWYgKHNlc3Npb25EYXRhLnNlYXJjaF9jYXRlZ29yeT8ubGVuZ3RoID4gMCkgewogICAgY29uc3QgY2F0ZWdvcnkgPSBzZXNzaW9uRGF0YS5zZWFyY2hfY2F0ZWdvcnlbMF0uaWQ7CiAgICBwcm92aWRlci5pdGVtcyA9IGdlbmVyYXRlUHJvZHVjdHMoY2F0ZWdvcnkpOwoKICB9IGVsc2UgewogICAgcHJvdmlkZXIuaXRlbXMgPSBnZW5lcmF0ZVByb2R1Y3RzKCJNb2JpbGUgUGhvbmUiKTsKICB9CgogIC8vIFZhcmlhbnQgZ3JvdXAKICBwcm92aWRlci5jYXRlZ29yaWVzID0gWwogICAgewogICAgICBpZDogIlYxIiwKICAgICAgZGVzY3JpcHRvcjogeyBuYW1lOiAiVmFyaWFudCBHcm91cCIgfSwKICAgICAgdGFnczogWwogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0eXBlIiwKICAgICAgICAgIGxpc3Q6IFt7IGNvZGU6ICJ0eXBlIiwgdmFsdWU6ICJ2YXJpYW50X2dyb3VwIiB9XQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgY29kZTogImF0dHIiLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7IGNvZGU6ICJuYW1lIiwgdmFsdWU6ICJpdGVtLnRhZ3MuYXR0cmlidXRlLmNvbG91ciIgfSwKICAgICAgICAgICAgeyBjb2RlOiAic2VxIiwgdmFsdWU6ICIxIiB9CiAgICAgICAgICBdCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBjb2RlOiAiYXR0ciIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsgY29kZTogIm5hbWUiLCB2YWx1ZTogIml0ZW0udGFncy5hdHRyaWJ1dGUuc2l6ZSIgfSwKICAgICAgICAgICAgeyBjb2RlOiAic2VxIiwgdmFsdWU6ICIyIiB9CiAgICAgICAgICBdCiAgICAgICAgfQogICAgICBdCiAgICB9CiAgXTsKCiAgcmV0dXJuIHBheWxvYWQ7Cn0=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: 'ONDC:RETINVL'
          country: IND
          city: 'std:080'
          action: on_search
          core_version: 1.2.5
          bap_id: bnp.com
          bap_uri: 'https://bnp.com/ondc'
          bpp_id: snp.com
          bpp_uri: 'https://snp.com/ondc'
          transaction_id: T1
          message_id: M1
          timestamp: '2025-01-08T08:00:30.000Z'
        message:
          catalog:
            bpp/descriptor:
              name: Seller NP
              symbol: 'https://snp.com/images/np.png'
              short_desc: Seller Marketplace
              long_desc: Seller Marketplace
              images:
                - 'https://snp.com/images/np.png'
              tags:
                - code: bpp_terms
                  list:
                    - code: np_type
                      value: MSN
                    - code: accept_bap_terms
                      value: 'Y'
            bpp/providers:
              - id: P1
                time:
                  label: enable
                  timestamp: '2025-01-08T08:00:30.000Z'
                fulfillments:
                  - id: F1
                    type: Delivery
                  - id: F2
                    type: Self-Pickup
                payments:
                  - id: '1'
                    type: ON-ORDER
                  - id: '2'
                    type: ON-FULFILLMENT
                  - id: '3'
                    type: PART-PAYMENT
                    tags:
                      - code: payment_detail
                        list:
                          - code: ALLOWED-FULFILLMENTS
                            value: 'F1,F2'
                  - id: '4'
                    type: PART-PAYMENT
                    tags:
                      - code: payment_detail
                        list:
                          - code: ALLOWED-FULFILLMENTS
                            value: F2
                descriptor:
                  name: Store 1
                ttl: P1D
                locations:
                  - id: L1
                    time:
                      label: enable
                      timestamp: '2025-01-08T07:30:30.000Z'
                      schedule:
                        holidays:
                          - '2025-01-26'
                          - '2025-08-15'
                    gps: '12.9675,77.7496'
                    address:
                      area_code: '560076'
                      state: KA
                categories:
                  - id: V1
                    descriptor:
                      name: iPhone Variants
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: variant_group
                      - code: attr
                        list:
                          - code: name
                            value: item.tags.attribute.colour
                          - code: seq
                            value: '1'
                      - code: attr
                        list:
                          - code: name
                            value: item.tags.attribute.size
                          - code: seq
                            value: '2'
                items:
                  - id: I1
                    time:
                      label: enable
                      timestamp: '2025-01-08T07:30:00.000Z'
                    parent_item_id: V1
                    descriptor:
                      name: Apple iPhone 14
                      code: '3:GTIN#'
                      symbol: 'https://snp.com/images/i1.png'
                      short_desc: Apple iPhone 14
                      long_desc: Apple iPhone 14
                      images:
                        - 'https://snp.com/images/i1.png'
                    quantity:
                      unitized:
                        measure:
                          unit: unit
                          value: '1'
                      maximum:
                        count: '1'
                    price:
                      currency: INR
                      value: '67999.00'
                      maximum_value: '79990.00'
                    category_id: Mobile Phone
                    fulfillment_id: F1
                    payment_ids:
                      - '1'
                      - '3'
                    location_id: L1
                    '@ondc/org/returnable': true
                    '@ondc/org/cancellable': true
                    '@ondc/org/return_window': P7D
                    '@ondc/org/seller_pickup_return': true
                    '@ondc/org/time_to_ship': PT3H
                    '@ondc/org/contact_details_consumer_care': 'Ramesh,ramesh@abc.com,18004254444'
                    '@ondc/org/statutory_reqs_packaged_commodities':
                      manufacturer_or_packer_name: Foxconn Ltd
                      manufacturer_or_packer_address: >-
                        A-1, Chennai-Bangalore National Highway, Nh-4,
                        Sriperumbudur, Kanchipuram, Tamil Nadu 602105
                      common_or_generic_name_of_commodity: Mobile Phone
                      month_year_of_manufacture_packing_import: 12/2024
                    tags:
                      - code: origin
                        list:
                          - code: country
                            value: IND
                      - code: attribute
                        list:
                          - code: brand
                            value: iPhone
                          - code: model
                            value: iPhone 14
                          - code: model_year
                            value: '2021'
                          - code: colour
                            value: '#FAF7F2'
                          - code: colour_name
                            value: Starlight
                          - code: ram
                            value: '128'
                          - code: ram_unit
                            value: GB
                          - code: rom
                            value: '128'
                          - code: rom_unit
                            value: GB
                          - code: storage
                            value: '256'
                          - code: storage_unit
                            value: GB
                          - code: screen_size
                            value: '6.1'
                          - code: primary_camera
                            value: '48'
                          - code: secondary_camera
                            value: '24'
                          - code: cpu
                            value: A15
                          - code: gpu
                            value: A16 bionic
                          - code: battery_capacity
                            value: '3279'
                          - code: os_type
                            value: iOS
                          - code: os_version
                            value: '16.0'
                          - code: connectivity
                            value: 4G
                          - code: form_factor
                            value: touchscreen
                          - code: weight
                            value: '172'
                          - code: length
                            value: '14.67'
                          - code: breadth
                            value: '7.15'
                          - code: height
                            value: '0.78'
                  - id: I2
                    time:
                      label: enable
                      timestamp: '2025-01-08T07:30:00.000Z'
                    parent_item_id: V1
                    descriptor:
                      name: Apple iPhone 14
                      code: '3:GTIN#'
                      symbol: 'https://snp.com/images/i2.png'
                      short_desc: Apple iPhone 14
                      long_desc: Apple iPhone 14
                      images:
                        - 'https://snp.com/images/i2.png'
                    quantity:
                      unitized:
                        measure:
                          unit: unit
                          value: '1'
                      maximum:
                        count: '2'
                    price:
                      currency: INR
                      value: '97999.00'
                      maximum_value: '109990.00'
                    category_id: Mobile Phone
                    fulfillment_id: F1
                    payment_ids:
                      - '1'
                      - '3'
                    location_id: L1
                    '@ondc/org/returnable': true
                    '@ondc/org/cancellable': true
                    '@ondc/org/return_window': P7D
                    '@ondc/org/seller_pickup_return': true
                    '@ondc/org/time_to_ship': PT3H
                    '@ondc/org/contact_details_consumer_care': 'Ramesh,ramesh@abc.com,18004254444'
                    '@ondc/org/statutory_reqs_packaged_commodities':
                      manufacturer_or_packer_name: Foxconn Ltd
                      manufacturer_or_packer_address: >-
                        A-1, Chennai-Bangalore National Highway, Nh-4,
                        Sriperumbudur, Kanchipuram, Tamil Nadu 602105
                      common_or_generic_name_of_commodity: Mobile Phone
                      month_year_of_manufacture_packing_import: 12/2024
                    tags:
                      - code: origin
                        list:
                          - code: country
                            value: IND
                      - code: attribute
                        list:
                          - code: brand
                            value: iPhone
                          - code: model
                            value: iPhone 14
                          - code: model_year
                            value: '2021'
                          - code: colour
                            value: '#FAF7F2'
                          - code: colour_name
                            value: Starlight
                          - code: ram
                            value: '128'
                          - code: ram_unit
                            value: GB
                          - code: rom
                            value: '128'
                          - code: rom_unit
                            value: GB
                          - code: storage
                            value: '512'
                          - code: storage_unit
                            value: GB
                          - code: screen_size
                            value: '6.1'
                          - code: primary_camera
                            value: '48'
                          - code: secondary_camera
                            value: '24'
                          - code: cpu
                            value: A15
                          - code: gpu
                            value: A16 bionic
                          - code: battery_capacity
                            value: '3279'
                          - code: os_type
                            value: iOS
                          - code: os_version
                            value: '16.0'
                          - code: connectivity
                            value: 4G
                          - code: form_factor
                            value: touchscreen
                          - code: weight
                            value: '172'
                          - code: length
                            value: '14.67'
                          - code: breadth
                            value: '7.15'
                          - code: height
                            value: '0.78'
                tags:
                  - code: timing
                    list:
                      - code: type
                        value: All
                      - code: location
                        value: L1
                      - code: day_from
                        value: '1'
                      - code: day_to
                        value: '7'
                      - code: time_from
                        value: '0000'
                      - code: time_to
                        value: '2359'
                  - code: serviceability
                    list:
                      - code: location
                        value: L1
                      - code: category
                        value: Mobile Phone
                      - code: type
                        value: '13'
                      - code: unit
                        value: geojson
                      - code: val
                        value: >-
                          {"type": "FeatureCollection", "features": [{"type":
                          "Feature", "properties": {}, "geometry":
                          {"coordinates": [[[[77.4366, 14.6230], [75.5973,
                          13.2507], [76.8359, 11.9329], [78.7709, 11.3290]]],
                          [[[75.6948, 15.9928], [74.8319, 14.8515], [77.4006,
                          15.1229], [75.6948, 15.9928]]]], "type":
                          "MultiPolygon"}}]}
                      - code: day_from
                        value: '1'
                      - code: day_to
                        value: '7'
                      - code: time_from
                        value: '0000'
                      - code: time_to
                        value: '2359'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        city_code: $.context.city
      inputs: {}
transaction_history:
  - action_id: search_1
    payload:
      context:
        domain: 'ONDC:RETINVL'
        action: search
        timestamp: '2026-02-23T14:22:52.886Z'
        transaction_id: a46c032b-27ba-4bc5-b1d9-631402166902
        message_id: 638205c6-5e6f-4fb6-b78c-800297e5d0c7
        bap_id: bap.example.com
        bap_uri: 'https://bap.example.com'
        ttl: PT30S
        country: IND
        city: 'std:080'
        core_version: 1.2.5
      message:
        intent:
          fulfillment:
            type: Delivery
            end:
              location:
                gps: '12.4535,77.9283'
                address:
                  area_code: '560001'
          payment:
            '@ondc/org/buyer_app_finder_fee_type': percent
            '@ondc/org/buyer_app_finder_fee_amount': '3'
          tags:
            - code: bap_terms
              list:
                - code: static_terms
                  value: ''
                - code: static_terms_new
                  value: >-
                    https://github.com/ONDC-Official/NP-Static-Terms/buyerNP_BNP/1.0/tc.pdf
                - code: effective_date
                  value: '2026-02-23T14:22:52.886Z'
          category:
            id: Mobile Phone
    action: search
    saved_info: {}
  - action_id: on_search_1
    payload:
      context:
        domain: 'ONDC:RETINVL'
        action: on_search
        timestamp: '2026-02-23T14:22:52.942Z'
        transaction_id: a46c032b-27ba-4bc5-b1d9-631402166902
        message_id: 638205c6-5e6f-4fb6-b78c-800297e5d0c7
        bap_id: bap.example.com
        bap_uri: 'https://bap.example.com'
        ttl: PT30S
        bpp_id: bpp.example.com
        bpp_uri: 'https://bpp.example.com'
        country: IND
        city: 'std:080'
        core_version: 1.2.5
      message:
        catalog:
          bpp/descriptor:
            name: Seller NP
            symbol: 'https://snp.com/images/np.png'
            short_desc: Seller Marketplace
            long_desc: Seller Marketplace
            images:
              - 'https://snp.com/images/np.png'
            tags:
              - code: bpp_terms
                list:
                  - code: np_type
                    value: MSN
                  - code: accept_bap_terms
                    value: 'Y'
          bpp/providers:
            - id: P1
              time:
                label: enable
                timestamp: '2026-02-23T14:22:52.942Z'
              fulfillments:
                - id: F1
                  type: Delivery
                - id: F2
                  type: Self-Pickup
              payments:
                - id: '1'
                  type: ON-ORDER
                - id: '2'
                  type: ON-FULFILLMENT
                - id: '3'
                  type: PART-PAYMENT
                  tags:
                    - code: payment_detail
                      list:
                        - code: ALLOWED-FULFILLMENTS
                          value: 'F1,F2'
                - id: '4'
                  type: PART-PAYMENT
                  tags:
                    - code: payment_detail
                      list:
                        - code: ALLOWED-FULFILLMENTS
                          value: F2
              descriptor:
                name: Store 1
              ttl: P1D
              locations:
                - id: L1
                  time:
                    label: enable
                    timestamp: '2025-01-08T07:30:30.000Z'
                    schedule:
                      holidays:
                        - '2025-01-26'
                        - '2025-08-15'
                  gps: '12.9675,77.7496'
                  address:
                    area_code: '560076'
                    state: KA
              categories:
                - id: V1
                  descriptor:
                    name: Variant Group
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: variant_group
                    - code: attr
                      list:
                        - code: name
                          value: item.tags.attribute.colour
                        - code: seq
                          value: '1'
                    - code: attr
                      list:
                        - code: name
                          value: item.tags.attribute.size
                        - code: seq
                          value: '2'
              items:
                - id: I1
                  time:
                    label: enable
                    timestamp: '2026-02-23T14:22:52.942Z'
                  parent_item_id: V1
                  descriptor:
                    name: Apple Mobile Phone Standard
                    code: '3:GTIN1'
                    short_desc: Apple Mobile Phone Standard
                    long_desc: Apple Mobile Phone Standard Edition
                    images:
                      - >-
                        https://dummyimage.com/600x400/000/fff&text=Apple%20Mobile%20Phone%20Standard
                  quantity:
                    unitized:
                      measure:
                        unit: unit
                        value: '1'
                    maximum:
                      count: '5'
                  price:
                    currency: INR
                    value: '17530'
                    maximum_value: '19530'
                  category_id: Mobile Phone
                  fulfillment_id: F1
                  payment_ids:
                    - '1'
                  location_id: L1
                - id: I2
                  time:
                    label: enable
                    timestamp: '2026-02-23T14:22:52.942Z'
                  parent_item_id: V1
                  descriptor:
                    name: Apple Mobile Phone Pro
                    code: '3:GTIN2'
                    short_desc: Apple Mobile Phone Pro
                    long_desc: Apple Mobile Phone Pro Edition
                    images:
                      - >-
                        https://dummyimage.com/600x400/000/fff&text=Apple%20Mobile%20Phone%20Pro
                  quantity:
                    unitized:
                      measure:
                        unit: unit
                        value: '1'
                    maximum:
                      count: '5'
                  price:
                    currency: INR
                    value: '11559'
                    maximum_value: '13559'
                  category_id: Mobile Phone
                  fulfillment_id: F1
                  payment_ids:
                    - '1'
                  location_id: L1
                - id: I3
                  time:
                    label: enable
                    timestamp: '2026-02-23T14:22:52.942Z'
                  parent_item_id: V1
                  descriptor:
                    name: Apple Mobile Phone Premium
                    code: '3:GTIN3'
                    short_desc: Apple Mobile Phone Premium
                    long_desc: Apple Mobile Phone Premium Edition
                    images:
                      - >-
                        https://dummyimage.com/600x400/000/fff&text=Apple%20Mobile%20Phone%20Premium
                  quantity:
                    unitized:
                      measure:
                        unit: unit
                        value: '1'
                    maximum:
                      count: '5'
                  price:
                    currency: INR
                    value: '21018'
                    maximum_value: '23018'
                  category_id: Mobile Phone
                  fulfillment_id: F1
                  payment_ids:
                    - '1'
                  location_id: L1
                - id: I4
                  time:
                    label: enable
                    timestamp: '2026-02-23T14:22:52.942Z'
                  parent_item_id: V1
                  descriptor:
                    name: Samsung Mobile Phone Standard
                    code: '3:GTIN4'
                    short_desc: Samsung Mobile Phone Standard
                    long_desc: Samsung Mobile Phone Standard Edition
                    images:
                      - >-
                        https://dummyimage.com/600x400/000/fff&text=Samsung%20Mobile%20Phone%20Standard
                  quantity:
                    unitized:
                      measure:
                        unit: unit
                        value: '1'
                    maximum:
                      count: '5'
                  price:
                    currency: INR
                    value: '5649'
                    maximum_value: '7649'
                  category_id: Mobile Phone
                  fulfillment_id: F1
                  payment_ids:
                    - '1'
                  location_id: L1
                - id: I5
                  time:
                    label: enable
                    timestamp: '2026-02-23T14:22:52.942Z'
                  parent_item_id: V1
                  descriptor:
                    name: Samsung Mobile Phone Pro
                    code: '3:GTIN5'
                    short_desc: Samsung Mobile Phone Pro
                    long_desc: Samsung Mobile Phone Pro Edition
                    images:
                      - >-
                        https://dummyimage.com/600x400/000/fff&text=Samsung%20Mobile%20Phone%20Pro
                  quantity:
                    unitized:
                      measure:
                        unit: unit
                        value: '1'
                    maximum:
                      count: '5'
                  price:
                    currency: INR
                    value: '16479'
                    maximum_value: '18479'
                  category_id: Mobile Phone
                  fulfillment_id: F1
                  payment_ids:
                    - '1'
                  location_id: L1
                - id: I6
                  time:
                    label: enable
                    timestamp: '2026-02-23T14:22:52.942Z'
                  parent_item_id: V1
                  descriptor:
                    name: Samsung Mobile Phone Premium
                    code: '3:GTIN6'
                    short_desc: Samsung Mobile Phone Premium
                    long_desc: Samsung Mobile Phone Premium Edition
                    images:
                      - >-
                        https://dummyimage.com/600x400/000/fff&text=Samsung%20Mobile%20Phone%20Premium
                  quantity:
                    unitized:
                      measure:
                        unit: unit
                        value: '1'
                    maximum:
                      count: '5'
                  price:
                    currency: INR
                    value: '16605'
                    maximum_value: '18605'
                  category_id: Mobile Phone
                  fulfillment_id: F1
                  payment_ids:
                    - '1'
                  location_id: L1
              tags:
                - code: timing
                  list:
                    - code: type
                      value: All
                    - code: location
                      value: L1
                    - code: day_from
                      value: '1'
                    - code: day_to
                      value: '7'
                    - code: time_from
                      value: '0000'
                    - code: time_to
                      value: '2359'
                - code: serviceability
                  list:
                    - code: location
                      value: L1
                    - code: category
                      value: Mobile Phone
                    - code: type
                      value: '13'
                    - code: unit
                      value: geojson
                    - code: val
                      value: >-
                        {"type": "FeatureCollection", "features": [{"type":
                        "Feature", "properties": {}, "geometry": {"coordinates":
                        [[[[77.4366, 14.6230], [75.5973, 13.2507], [76.8359,
                        11.9329], [78.7709, 11.3290]]], [[[75.6948, 15.9928],
                        [74.8319, 14.8515], [77.4006, 15.1229], [75.6948,
                        15.9928]]]], "type": "MultiPolygon"}}]}
                    - code: day_from
                      value: '1'
                    - code: day_to
                      value: '7'
                    - code: time_from
                      value: '0000'
                    - code: time_to
                      value: '2359'
    action: on_search
    saved_info: {}
validationLib: ''
helperLib: >-
  LyoKCUN1c3RvbSBoZWxwZXIgZnVuY3Rpb25zIGF2YWlsYWJsZSBpbiBhbGwgbW9jayBnZW5lcmF0aW9uIGZ1bmN0aW9ucy4KCXRoZXNlIGFyZSBhcHBlbmRlZCBiZWxvdyB0aGUgZ2VuZXJhdGUgZnVuY3Rpb24gZm9yIGVhY2ggc3RlcC4KKi8KCmNvbnN0IGNyZWF0ZUZvcm1VUkwgPSAoZG9tYWluLGZvcm1JZCwgc2Vzc2lvbkRhdGEpID0+IHsKCWNvbnN0IGJhc2VVUkwgPSBzZXNzaW9uRGF0YS5tb2NrQmFzZVVybDsKCWNvbnN0IHRyYW5zYWN0aW9uSWQgPSBzZXNzaW9uRGF0YS50cmFuc2FjdGlvbklkWzBdOwoJY29uc3Qgc2Vzc2lvbklkID0gc2Vzc2lvbkRhdGEuc2Vzc2lvbklkOwoJcmV0dXJuIGAke2Jhc2VVUkx9L2Zvcm1zLyR7ZG9tYWlufS8ke2Zvcm1JZH0vP3RyYW5zYWN0aW9uX2lkPSR7dHJhbnNhY3Rpb25JZH0mc2Vzc2lvbl9pZD0ke3Nlc3Npb25JZH1gOwp9CgovLyBHZW5lcmF0ZXMgYSBVVUlEIHY0CmZ1bmN0aW9uIHV1aWR2NCgpIHsKCXJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7CgkgIGNvbnN0IHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwOwoJICBjb25zdCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzIHwgMHg4KTsKCSAgcmV0dXJuIHYudG9TdHJpbmcoMTYpOwoJfSk7Cn0KCi8vIEdlbmVyYXRlIGEgNiBkaWdpdCBzdHJpbmcgSUQKZnVuY3Rpb24gZ2VuZXJhdGU2RGlnaXRJZCgpIHsKCXJldHVybiBNYXRoLmZsb29yKDEwMDAwMCArIE1hdGgucmFuZG9tKCkgKiA5MDAwMDApLnRvU3RyaW5nKCk7Cn0KCi8vIFJldHVybnMgdGhlIGN1cnJlbnQgSVNPIHRpbWVzdGFtcApmdW5jdGlvbiBjdXJyZW50VGltZXN0YW1wKCkgewoJcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsKfQoKLy8gQ29udmVydHMgSVNPIDg2MDEgZHVyYXRpb24gc3RyaW5nIHRvIHRvdGFsIHNlY29uZHMKY29uc3QgaXNvRHVyVG9TZWMgPSAoZHVyYXRpb24pID0+IHsKICBjb25zdCBkdXJSRSA9IC9QKChkKylZKT8oKGQrKU0pPygoZCspVyk/KChkKylEKT9UPygoZCspSCk/KChkKylNKT8oKGQrKVMpPy87CiAgY29uc3QgcyA9IGR1clJFLmV4ZWMoZHVyYXRpb24pOwogIGlmICghcykgcmV0dXJuIDA7CiAgCiAgcmV0dXJuIChOdW1iZXIocz8uWzJdKSB8fCAwKSAqIDMxNTM2MDAwICsKCShOdW1iZXIocz8uWzRdKSB8fCAwKSAqIDI2MjgyODggKwoJKE51bWJlcihzPy5bNl0pIHx8IDApICogNjA0ODAwICsKCShOdW1iZXIocz8uWzhdKSB8fCAwKSAqIDg2NDAwICsKCShOdW1iZXIocz8uWzEwXSkgfHwgMCkgKiAzNjAwICsKCShOdW1iZXIocz8uWzEyXSkgfHwgMCkgKiA2MCArCgkoTnVtYmVyKHM/LlsxNF0pIHx8IDApOwp9OwoKY29uc3Qgc2V0Q2l0eUZyb21JbnB1dHMgPSAocGF5bG9hZCwgaW5wdXRzKSA9PiB7CglpZiAoIWlucHV0cykgcmV0dXJuICIqIjsKCWxldCB2ZXJzaW9uID0gcGF5bG9hZC5jb250ZXh0LnZlcnNpb24gfHwgcGF5bG9hZC5jb250ZXh0LmNvcmVfdmVyc2lvbiB8fCAiMi4wLjAiOwoJaWYgKHZlcnNpb24uc3RhcnRzV2l0aCgiMSIpKSB7CgkJcGF5bG9hZC5jb250ZXh0LmNpdHkgPSBpbnB1dHMuY2l0eV9jb2RlID8/ICIqIjsKCX0gZWxzZSB7CgkJcGF5bG9hZC5jb250ZXh0LmxvY2F0aW9uLmNpdHkuY29kZSA9IGlucHV0cy5jaXR5X2NvZGUgPz8gIioiOwoJfQp9Cg==
